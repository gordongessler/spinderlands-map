<!DOCTYPE html>
<html style="height: 100%;">

<head>
    <title>Spinderlands Interactive Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="scripts/leaflet.css">
    <script src="scripts/leaflet.js"></script>
</head>

<body style="height: 100%;margin: 0;">
    <div id="map" style="width: 100%; height: 100%; background: #888888;"></div>

    <script type="text/javascript">

        //Create layers
        var geograpihcal = L.tileLayer('maps/geographical/{z}/{x}/{y}.png', {
            noWrap: true
        });
        var political = L.tileLayer('maps/political/{z}/{x}/{y}.png', {
            noWrap: true
        });

        //Create Map
        var map = L.map('map', {
            minZoom: 0,
            maxZoom: 5,
            attributionControl: false,
            layers: [geograpihcal, political],
            crs: L.CRS.Simple
        }).setView([0, 0], 2);

        //Set bounds for the map
        var mapSW = [0, 8192],
            mapNE = [8192, 0];

        map.setMaxBounds(new L.LatLngBounds(
            map.unproject(mapSW, map.getMaxZoom()),
            map.unproject(mapNE, map.getMaxZoom())
        ));

        //Add coordinate finding marker 
        var locationFinder = L.marker([-130.25, 124.5], {
            draggable: true
        }).addTo(map);
        locationFinder.bindPopup("Use me to find coordinates").openPopup();
        locationFinder.on('dragend', function (e) {
            locationFinder.getPopup().setContent('LatLng: ' + locationFinder.getLatLng().toString() + '<br />'
                + 'Pixels: ' + map.project(locationFinder.getLatLng(), map.getMaxZoom()).toString()).openOn(map);
        });

        //Add markers and assing popups
        //Zir        
        var zir_zir = L.marker(map.unproject([2579, 1439], map.getMaxZoom())).addTo(map);
        zir_zir.bindPopup("Zir");

        var zir_ziris = L.marker(map.unproject([2833, 1512], map.getMaxZoom())).addTo(map);
        zir_ziris.bindPopup("Ziris");
        
        var zir_kharzim = L.marker(map.unproject([2381, 1230], map.getMaxZoom())).addTo(map);
        zir_kharzim.bindPopup("Kharzim");
        
        var zir_rezma = L.marker(map.unproject([2328, 1961], map.getMaxZoom())).addTo(map);
        zir_rezma.bindPopup("Rezma");
        
        var zir_kelrix = L.marker(map.unproject([3427, 1862], map.getMaxZoom())).addTo(map);
        zir_kelrix.bindPopup("Kelrix");
        
        var zir_garut = L.marker(map.unproject([3124, 1140], map.getMaxZoom())).addTo(map);
        zir_garut.bindPopup("Garut");
        
        var zir_teghad = L.marker(map.unproject([4172, 1681], map.getMaxZoom())).addTo(map);
        zir_teghad.bindPopup("Teghad");

        //Add Layers Control
        var baseMaps = {
            "Geograpihcal": geograpihcal,
            "Political": political
        };
        L.control.layers(baseMaps, null).addTo(map);

    </script>
</body>

</html>